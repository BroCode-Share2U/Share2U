{% extends "layout.html.twig" %}

{% block title '' %}

{% block content %}
    <div id="searchResultMain">
        <div class="h2Text">
                    {% if searchString is not empty %}
                        <h2>Results for:<br/><span>"{{ searchString }}"</span> </h2>
                    {% else %}
                        <h2>All Results</h2>
                    {% endif %}
                    </div>
        <div class="searchResults">
            {% for item in items %}
                <div class="cardBox">
                    <div class="insideCardBox1">
                        <div class="pictureBox">
                            <img src="{{ item.cover }}" alt="card item picture">
                        </div>
                    </div>
                    <div class="insideCardBox2">
                        {#<div>{{ item.id }}</div>#}
                        <h4>{{ item.name }}</h4>
                        {#<div>{{ item.owner.id }}</div>#}
                        <div id="searchResultCardDescription">
                            {% if item.description is not null %}
                                <span>"{{ item.description }}"</span>
                            {% endif %}
                            </div>
                        <div class="bottomPictureCardBox"><span>Posted on </span>{{ item.insertedAt|date("m/d/Y") }}<span> by </span><a href="{{ path('user', { 'username': item.owner.username }) }}" id="userLinkCardBox">{{ item.owner.username }}</a></div>
                        <div class="buttonBox">
                            <a href="{{ path('item', { 'itemId': item.id }) }}"><button>More</button></a>
                            <a href="{{ path('requestItem', { 'itemId': item.id }) }}"><button>Request</button></a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div>
{#            <?php if (empty($search) && empty($session)) : ?>
            <div class="row center-align">
                <ul class="pagination">
                    <?php if ($pagination["page"] == 1) : ?>
                    <li class="disabled"><a href=""><i class="material-icons">first_page</i></a></li>
                    <li class="disabled"><a href=""><i class="material-icons">chevron_left</i></a></li>
                    <?php else: ?>
                    <li><a href="list.php?page=1&nbPage=<?= $pagination["limit"] ?>"><i class="material-icons">first_page</i></a></li>
                    <li><a href="list.php?page=<?= $pagination["page"]-1 ?>&nbPage=<?= $pagination["limit"] ?>"><i class="material-icons">chevron_left</i></a></li>
                    <?php endif; ?>

                    <?php if( $pagination["page"] > 5 ) : ?>
                    <li>...</li>
                    <?php endif; ?>

                    <?php for ($i = $pagination["page"]-4; $i <= $pagination["page"]+4; $i++) : ?>
                    <?php if ($pagination["page"] == $i) : ?>
                    <li class="active"><a href="list.php?page=<?= $pagination["page"] ?>&nbPage=<?= $pagination["limit"] ?>"><?= $pagination["page"] ?></a></li>
                    <?php elseif ($i > 0 && $i <= $pagination["numberPage"]) : ?>
                    <li class="waves-effect"><a href="list.php?page=<?= $i ?>&nbPage=<?= $pagination["limit"] ?>"><?= $i ?></a></li>
                    <?php endif;  ?>
                    <?php endfor; ?>

                    <?php if( $pagination["page"] < $pagination["numberPage"] - 4 ) : ?>
                    <li>...</li>
                    <?php endif; ?>

                    <?php if ($pagination["page"] == $pagination["numberPage"]) : ?>
                    <li class="disabled"><a href=""><i class="material-icons">chevron_right</i></a></li>
                    <li class="disabled"><a href=""><i class="material-icons">last_page</i></a></li>
                    <?php else: ?>
                    <li><a href="list.php?page=<?= $pagination["page"]+1 ?>&nbPage=<?= $pagination["limit"] ?>"><i class="material-icons">chevron_right</i></a></li>
                    <li><a href="list.php?page=<?= $pagination["numberPage"] ?>&nbPage=<?= $pagination["limit"] ?>"><i class="material-icons">last_page</i></a></li>
                    <?php endif; ?>
                </ul>
            </div>
            <?php endif; ?>#}
        </div>
    </div>
{% endblock %}